---
layout: post
title: useContext() ‚Äì –∫—Ä–∞–π–Ω–µ –ø–æ–ª–µ–∑–Ω—ã–π React —Ö—É–∫
author: –°–µ—Ä–≥–µ–π –ú–æ–Ω–∏–Ω
date: 2019-09-20T22:03:04+00:00
image: logo-og.png
draft: false
tags: 
  - React
---

–ï—Å–ª–∏ –≤—ã –µ—â—ë –Ω–µ —Å–ª—ã—à–∞–ª–∏, React —Ö—É–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–± –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ö–æ–Ω–µ—á–Ω–æ, —ç—Ç–æ —Å–µ—Ä—å–µ–∑–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –Ω–æ –≤–º–µ—Å—Ç–µ —Å —Ç–µ–º –ª—é–¥–∏ –∑–∞–¥–∞—é—Ç –≤–æ–ø—Ä–æ—Å "–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –Ω–∞–º —Ç–∞–∫ –Ω—É–∂–Ω—ã —Ö—É–∫–∏?"

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å: –µ—Å—Ç—å –ª–∏ —Å–∏—Ç—É–∞—Ü–∏–∏ –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—É–∫–∏ *–æ—á–µ–≤–∏–¥–Ω–æ –ª—É—á—à–µ?* –ú–æ–π –æ—Ç–≤–µ—Ç *–¥–∞* –∏ —è –¥—É–º–∞—é –≤—ã —Å–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —Ç–µ–º, —á—Ç–æ —Ö—É–∫–∏ —É–ª—É—á—à–∞—é—Ç —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å, –∫–æ–≥–¥–∞ —è –ø–æ–∫–∞–∂—É –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ```useContext```.

## Context üòï

–° —Å–∞–º–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è React'–∞, –æ–¥–Ω–æ–π –∏–∑ –Ω–∞–∏–º–µ–Ω–µ–µ –ø—Ä–∏—è—Ç–Ω—ã—Ö –≤–µ—â–µ–π –±—ã–ª–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Ä–æ–≤–Ω–µ–π –ø–æ –¥–µ—Ä–µ–≤—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –í–Ω–∞—á–∞–ª–µ, —ç—Ç–æ –º–æ–∂–Ω–æ –±—ã–ª–æ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é, –ø–µ—Ä–µ–¥–∞–≤–∞—è props —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è –∫ –¥–æ—á–µ—Ä–Ω–µ–º—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É (—Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π *prop drilling*). –û—á–µ–≤–∏–¥–Ω–æ, —ç—Ç–æ –±—ã–ª–æ –≥—Ä–æ–º–æ–∑–¥–∫–æ –∏ –∫–æ–º–∞–Ω–¥–∞ React'–∞ –ø–æ–¥–∞—Ä–∏–ª–∞ –Ω–∞–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π Context API –¥–ª—è —Ä–∞–±–æ—Ç—ã, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã–ø—É—Å—Ç–∏–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é Context API. –ù–æ –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–∂–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ç–æ–Ω–∫–æ—Å—Ç–∏.

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Context'–∞, –æ–±—ã—á–Ω–æ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏-—Ä–µ–Ω–¥–µ—Ä–∞, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ:

```jsx
import React from 'react'

const CurrentRoute = React.createContext({ path: '/dashboard' })

export default function App() {
  return (
    <CurrentRoute.Consumer>
      {currentRoute => 
        currentRoute.path === '/dashboard' &&
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫—É!"
      }
    </CurrentRoute.Consumer>
  )
}
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –ò —á–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, –∫–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É, –Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –Ω–∞ —Å–µ–∫—É–Ω–¥—É, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å *—Ç—Ä–∏* –æ–±—ä–µ–∫—Ç–∞ Context'–∞:

```jsx
import React from 'react'

const CurrentRoute = React.createContext({ path: '/dashboard' })
const CurrentUser = React.createContext({ name: "–°–µ—Ä–≥–µ–π" })
const IsStatic = React.createContext(false)

export default function App() {
  return (
    <CurrentRoute.Consumer>
      {currentRoute =>
        <CurrentUser.Consumer>
          {currentUser =>
            <IsStatic.Consumer>
              {isStatic =>
                !isStatic &&
                currentRoute.path === '/dashboard' &&
                (currentUser
                  ? `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${currentUser.name}!`
                  : '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!'
                )
              }
            </IsStatic.Consumer>
          }
        </CurrentUser.Consumer>
      }
    </CurrentRoute.Consumer>
  )
}
```  

–•–æ—Ç—è –≤—Ç–æ—Ä–æ–π –ø—Ä–∏–º–µ—Ä *—Ä–∞–±–æ—Ç–∞–µ—Ç*, –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≥—Ä–æ–º–æ–∑–¥–∫–æ. –ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –Ω–∞—á–∏–Ω–∞–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–∏—Ä–∞–º–∏–¥–∞ –∏–∑ –∫–æ–ª–±—ç–∫–æ–≤ ‚Äì —á–µ–º –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ, —Ç–µ–º —Ö—É–∂–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è. –ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ö—É–∫ ```useContext```.

## useContext() üòÜ

–ù–∞—á–∏–Ω–∞—è —Å React 16.8, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ```useContext()```: –Ω–æ–≤—ã–π, –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤. –í–æ—Ç –∫–∞–∫ –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –≤—ã—à–µ–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```jsx
import React, { useContext } from 'react'

const CurrentRoute = React.createContext({ path: '/dashboard' })
const CurrentUser = React.createContext(undefined)
const IsStatic = React.createContext(false)

export default function App() {
  let currentRoute = useContext(CurrentRoute)
  let currentUser = useContext(CurrentUser)
  let isStatic = useContext(IsStatic)

  return (
    !isStatic &&
    currentRoute.path === '/dashboard' &&
    (currentUser
      ? `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${currentUser.name}!`
      : '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!'
    )
  )
}
```

–ì–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ, –Ω–µ –ø—Ä–∞–≤–¥–∞ –ª–∏? –¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤—ã—à–µ–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ Context API –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ–¥–∞–º–∏ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ö—É–∫–æ–≤. –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–ª–∏? –ó–¥–æ—Ä–æ–≤–æ! –¢–µ–ø–µ—Ä—å –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å:

**–ö–∞–∫–æ–π —Å–ø–æ—Å–æ–± –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª–µ–Ω?**

–ü–æ-–º–æ–µ–º—É, –æ—á–µ–≤–∏–¥–Ω–æ –≤—Ç–æ—Ä–æ–π. –í 2019-–º –≥–æ–¥—É, —Ö—É–∫–∏ –ø—Ä–∏–≤–Ω–µ—Å–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥. –ù–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ –±—É–¥—É—Ç –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω—ã? –í—Ä–µ–º—è –ø–æ–∫–∞–∂–µ—Ç. –ê –ø–æ–∫–∞ –º—ã –º–æ–∂–µ–º –ª–∏—à—å c —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é —Å–∫–∞–∑–∞—Ç—å: *–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ö—É–∫–∏*. 

–¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±–æ–ª—å—à–µ —É–∑–Ω–∞—Ç—å –æ —Ö—É–∫–∞—Ö, —Å–æ–≤–µ—Ç—É—é –ø–æ—á–∏—Ç–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã:

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://ru.reactjs.org/docs/hooks-intro.html) –ø–æ —Ö—É–∫–∞–º. –û—á–µ–Ω—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç—å—è, —Å–æ–≤–µ—Ç—É—é –≤—Å–µ–º –≤–∑–≥–ª—è–Ω—É—Ç—å.   
